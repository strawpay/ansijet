sudo: required
branches:
  only:
    - master

language: node_js

services:
  - mongodb
  - docker

node_js:
  - "0.11"

before_script:
  - "sudo pip install ansible"
  - "npm install -g gulp"
  - "npm install -g bower"
  - "npm install"
  - "bower install"
  - docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USER" -p="$DOCKER_PASSWORD" https://strawpay-docker-dockerv2-local.artifactoryonline.com

script:
  - "npm run ci"

after_success:
  - docker build -t strawpay-docker-dockerv2-local.artifactoryonline.com/ansijet .
  - docker push strawpay-docker-dockerv2-local.artifactoryonline.com/ansijet

env:
  global:
  - secure: rJFga284J3m2JA6nRvspjTL/Chj0WtBSXsJY3PsFtm+/rH6rD1NFG/5qVe5JxTc/CJt/VcEnXGRFDhLJTRfoc1D3j8Zg3Q6gEExnQqCzbkaMmvrT2BaOsNdwgE0qG5vXEny6EvDnPeB45PiNx68BzJ3xjsbYThsaGYo3dtsqmzt1VkHPEcL727ssFtVTSBatYnXJvfAZfLWdAhjrUzB8+/wdLgiyZ+kdhEc4mcBlQ99u/MbIrQlwxy/n7bVm7PJ4hbTmqEeiNOg9MEjgQ5nJPjFuJooIknziUzrXtKJ1Wua/LpgqH4EUAVGKYpy+1cNPpo/BHVkomarSKxMTkc1SWLq7g9ABwGlFajyyZyT09PrWam47hv6QSKqyqRCtugsXiXG9lWFOgJTYnFs3NuFD5sBedX/v5G/1ojBhPisR0bS7VRbv3nXmq47mp665zADwM57s/7DSUvvWFc0kAwsFHV5qN6d+lAZMv9P/ZFkmv8nNHAPAtqqfleh+4wx69EXQWnULZcJke3SH8oq2+nh6V9/FygcSSIf5NG+yx/TMm/cbpkIuWJ+6HKtNItolSh4Vb3wD8n/Cvk8kd+PRK+xrj+plf6w5LdFTnUCphYltQQHRyO5kcnYQDY9Xi72Bf/AZzHWlEfHRDfTQSfrHiHBB6zbemnJq7UN/Nwgei5lKToo=
  - secure: qUXtdJ1eq92otOmKYTxHQRvkkhcKIvwVbHu+pWzdkIMeHNlinkEPt9mSXLeftzFktSz84kasp8d48kjGOwo/UA6ELHmm+5d4T5/UZdEcqPnlpkrj6eM53KqGSozujyecNAahdAMbxHqMJNG7SyQAol9JscHGwKj9iOgFpE0ndn9cXhmzQFPco05edGUskx4JNuTdIBanwiw9hD2hL9EEnpjDG0dwVyW1pLcNDWm6+SWyXPIVbF7tQ5bkMUEhTj80+2V5ftKO/4apV/7rX0wIs4EUZyfzzEilOxJWu3WEIa9yRpC+o3wY6ycLXph7nVK+xAd/JUUmu/HKDaZwAWmIdGDTfKm4aTa+qDUAa1ubYsede09//1hTFNhfStW5E1/x63bFKk1CH43meip2zgiMjjzjQBzWeTbJPQrb82ck8kUD/30FO2OqP9+tTvq9/7ViIUhwH+eZD0zQpLW0mZc3kVSXJG3ShN11K7r3YfK+5skRJzvd9S1iKImi/DR6UE8MdIkwjqAUMJEWWaUzZSPzJ5vPeU1tOykC2uvqM8K2YNcngR5A2nboE/FOlYhCYGeZdxd/M18NMO8MKUOpKKOh0M93T+F0XoSi0ZYjr/fGDbcB43yupyon4AVfoFLCmsfGkG2p/BlxmRybgxQVt9Geng6YwuAvdPaYx9bSeFVQ0Mw=
  - secure: aCxuEk7zgLzmNZTGBSwb+wCbhsepIFF4DlbhOmm5lh16cxppmFIGrg2CVWDVbWRrFfT0WGHp4VBGAPu3VPV6lK6oqynAoq8lBkXk7u+uPud43rg6NcZpdZCSzwHiNsoMCZ7T9oJBRSqnM6ELZEpgBhGcGJDp660SOXG8owr9rsDiwX1+JDeobM1qkZtVhtLafpXWhYewUJWydnyr9d1QA6RSUZKjuYUgAS2epsh54bfoXirHaGARF2Ltg4jtHstfjH44ZTipFjhJMZVvbPnjzmkO/p4XYszEB+HuMkwfq2rNclYT3d9UQI6rti3yf5BPf/Bnxb8rtmJgb+mK1/3o8gWRTCxHCtN5hhdjWGOetDONcreI8qT8J4oQS4DvKaRJUK8aHqF2m7Vl1gC9VMLL69gfbDxrKofd/vEelaK+Y/hdz3NnSD49g1IUC7LGP39WP+a3iQQcrbHG+5JyBYyf3saNfrV1MK+IzBU3scF/Sj3d9ImtI4YdGsUzK6ZIMPeOEcRJ2iRR29/Y2V81SQ0gYeM5mwOdf7km5G3/sci7kLCgp7DYQ/Ln5XIEbaUsADgzRwHEXjDffNvl1ht4n1Fi4FJXrPHpFz5uG2frWbZ5zWaJMCSl2F9tS0xT/k3zpn1I4theWo5k2sbE+MVxiv879wjPaMiq/Q76PZJ2EWP2N9c=
  - secure: YuzTL2mGDIBwAAm8g3vJDm3uAhjdF3kbudabY5qIxj9JTJLpvSfkKEXhfY0HRpGHRRrHIB2rBvgsWyB5hfqWlP3lb3J/Uss3tytCRYsyKX8KJYSU0jWQ8t14ticC/2+piU2q4jk8wrJrpa4XlrLeaJ9ahbXR3KSkmKp5GS4uqX36fyxNTLx+g2PnHwHf3s3LTng/xuJsUiy2fpWjZmX6FyZKUUGjWj9KMinL5VN4LXQCtcDAID0nXx8RR/nu/JyLfDPQgPq0vjE+4h2oAzYxZ3jv7jc/8/Zz/4PScvC5Cp0kQ3T2qQq9OgicJ87VKzvoxgHTWffEjMOFcH7twTnV3oeiNtgcV3Pgdu7YoHDdsllp8ZANPViYlqBPVeKKDYJAepE8YVfxJ6lr6mZ9Z3cKcP2TEErmiycwketm757KA4XsLBUU3oezDJX5w2W3tyhKp3x7Y7HVMgv81kBZSmatMrH0a/yDsiZasqsGKSJMaY39IzQmJg1OzqlVfvye4eHeVYVWd/5AU3uSQdw/mrGrLz5g//7tLRW5IprYG0VL+ICHV2+FUV5PmPle0b5juU3s1gjM35sEMnGuMu7w6oiZeqrS64sTZjONFjBb+84rce/FvvKBSFvbBz22G07zo4gnaCphC1GtTkHnMXcBkjPZCC9Shu72R3rBPskOgTy+9Xg=
  - secure: cB4Ar2qjtuIH3gQWRHBUdCZISuGK3aKWlh0HuXylKo/3nvUxK6dVRXZdYKYmUsWxsmGR383g15Rwh+H0EJlIPlGg/slI7tfDfHM2dgkLxhDhJOK7O3TbUCpwrA/PuCbg65XmOmQLmHUX/Y7bqCnQtItOxVwB2TZmfiGObmUlyyovqg32LWsjdQMV3Ix7iD6Y7MkK+J0TzAyGVPysN2oph0NTot1LLE5kVIPm+bkO0iSgTGEGeXCQ5PxC39tS0eaDnOoK2sy+ECW6W5FekesKTdv7QbozA+UKFiUCk1nhMWk7lKU4isqobCzSZzs367FC6CTDctYmvUn71NcgW/dCgCqbDsGROuBdBa8XFYe75lhJud5DgQDVfABrDsLYx7UX8rGh4DCUeRj5NLsIsRxphb/yypbSfb+DYT+KKHuKWJwyL3YgglkZ/iWJtakYUNlvzj2sgeo9n8kfqMUNwH9McbbYSkdgJkvzSFCu5h2YfE0annmxQ8c4rEymD/4SA9ynBiIq3zY7O8G4Gs9xQRVms76lf+PPdSACCday/ybP/xkFowDlz/Q9uYV1R+4M83A7DWmyWFf4x6Z44Htsy3cYhkgnOrK/S2NXNuviRmKIbcmhyeW45CFlJ3BwDsxmykUgBcb2LpSZoZ8SVDQlbl7Cye4FPZNLeOw3Pvi9bnHo+uM=
  
notifications:
  email:
    - zac@strawpay.com

